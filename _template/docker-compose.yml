services:
  target:
    build:
      context: .
      dockerfile: Dockerfile
    hostname: target
    networks:
      - oasis-net
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000/"]
      interval: 5s
      timeout: 3s
      retries: 5

  kali:
    image: ghcr.io/kryptsec/oasis-kali:latest
    platform: linux/amd64
    hostname: kali
    networks:
      - oasis-net
    restart: unless-stopped

networks:
  oasis-net:
    driver: bridge
